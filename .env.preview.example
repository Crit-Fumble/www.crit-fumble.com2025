# Preview/Staging Environment Variables for Vercel
# These should be set in Vercel Dashboard for "Preview" environment
# https://vercel.com/crit-fumble/www-crit-fumble-com2025/settings/environment-variables

# ============================================
# CRITICAL - Must be set for Preview to work
# ============================================

# NextAuth Configuration
NEXTAUTH_URL=https://staging.crit-fumble.com
# OR use Vercel preview URL:
# NEXTAUTH_URL=https://www-crit-fumble-com2025-git-staging-crit-fumble.vercel.app

# Auth Secret (generate with: openssl rand -base64 32)
# MUST be different from production!
NEXTAUTH_SECRET=<generate-unique-staging-secret>
AUTH_SECRET=<same-as-nextauth-secret>

# Node Environment
NODE_ENV=production

# ============================================
# Database - Staging Database (Neon)
# ============================================
# Option 1: Create separate Neon database for staging
# Option 2: Use Neon branch feature (recommended)
#   1. Go to https://console.neon.tech
#   2. Select project → Branches → New Branch
#   3. Name: "staging"
#   4. Copy connection strings below

DATABASE_URL=postgresql://neondb_owner:PASSWORD@staging-pooler.REGION.aws.neon.tech/staging?sslmode=require
DB_POSTGRES_PRISMA_URL=postgresql://neondb_owner:PASSWORD@staging-pooler.REGION.aws.neon.tech/staging?connect_timeout=15&sslmode=require
DB_POSTGRES_URL=postgresql://neondb_owner:PASSWORD@staging-pooler.REGION.aws.neon.tech/staging?sslmode=require
DB_POSTGRES_URL_NON_POOLING=postgresql://neondb_owner:PASSWORD@staging.REGION.aws.neon.tech/staging?sslmode=require

# Individual components (auto-populated by Neon)
DB_POSTGRES_HOST=staging-pooler.REGION.aws.neon.tech
DB_POSTGRES_USER=neondb_owner
DB_POSTGRES_PASSWORD=PASSWORD
DB_POSTGRES_DATABASE=staging
DB_PGDATABASE=staging

# ============================================
# Vercel Blob Storage
# ============================================
# Create separate token for staging at: https://vercel.com/dashboard/stores
BLOB_READ_WRITE_TOKEN=<staging-blob-token>

# ============================================
# Discord OAuth - Staging Application
# ============================================
# Create staging Discord app at: https://discord.com/developers/applications
# Redirect URL: https://staging.crit-fumble.com/api/auth/callback/discord

DISCORD_CLIENT_ID=<staging-discord-app-id>
DISCORD_CLIENT_SECRET=<staging-discord-app-secret>

# Optional Discord Bot (if needed for staging)
# DISCORD_BOT_TOKEN=<staging-bot-token>
# DISCORD_PUBLIC_KEY=<staging-public-key>

# Discord Admin Configuration (JSON arrays)
DISCORD_ADMIN_IDS=["YOUR_DISCORD_ID","ADMIN2_DISCORD_ID"]
DISCORD_OWNER_IDS=["OWNER1_DISCORD_ID","OWNER2_DISCORD_ID","OWNER3_DISCORD_ID","OWNER4_DISCORD_ID"]
OWNER_EMAILS=["owner1@crit-fumble.com","owner2@crit-fumble.com","owner3@crit-fumble.com","owner4@crit-fumble.com"]

# ============================================
# GitHub OAuth - Staging Application
# ============================================
# Create staging GitHub app at: https://github.com/settings/developers
# Homepage: https://staging.crit-fumble.com
# Callback: https://staging.crit-fumble.com/api/auth/callback/github

GITHUB_CLIENT_ID=<staging-github-app-id>
GITHUB_CLIENT_SECRET=<staging-github-app-secret>

# ============================================
# Additional OAuth Providers (Optional)
# ============================================

# Twitch (create staging app if needed)
TWITCH_CLIENT_ID=<staging-twitch-app-id>
TWITCH_CLIENT_SECRET=<staging-twitch-app-secret>

# Battle.net (create staging app if needed)
BATTLENET_CLIENT_ID=<staging-battlenet-app-id>
BATTLENET_CLIENT_SECRET=<staging-battlenet-app-secret>
BATTLENET_ISSUER=https://oauth.battle.net

# ============================================
# Encryption & Security
# ============================================
# Generate with: openssl rand -hex 32
# MUST be different from production!
API_KEY_ENCRYPTION_SECRET=<64-character-hex-string>

# ============================================
# World Anvil Integration
# ============================================
# Can share application key with production
WORLD_ANVIL_CLIENT_SECRET=<your-world-anvil-application-key>

# ============================================
# AI Services (Optional - can share with production)
# ============================================
# ANTHROPIC_API_KEY=<your-anthropic-key>
# OPENAI_API_KEY=<your-openai-key>

# ============================================
# Stripe (Use TEST keys for staging!)
# ============================================
# Get test keys from: https://dashboard.stripe.com/test/apikeys
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_PUBLISHABLE_KEY=pk_test_...
# STRIPE_EVENT_SIGNING_SECRET=whsec_test_...

# ============================================
# Optional Platform Integrations
# ============================================

# Steam (can share with production)
# STEAM_API_KEY=<your-steam-api-key>

# Digital Ocean (for Foundry provisioning - optional in staging)
# DO_API_TOKEN=<your-do-token>

# Foundry VTT Licenses (JSON array - optional in staging)
# FOUNDRY_VTT_LICENSES=["<license-key>"]

# ============================================
# Public URLs
# ============================================
NEXT_PUBLIC_BASE_URL=https://staging.crit-fumble.com
# Or Vercel preview URL:
# NEXT_PUBLIC_BASE_URL=https://www-crit-fumble-com2025-git-staging-crit-fumble.vercel.app

# ============================================
# HOW TO SET THESE IN VERCEL
# ============================================
# 1. Go to: https://vercel.com/crit-fumble/www-crit-fumble-com2025/settings/environment-variables
# 2. Click "Add New" for each variable above
# 3. IMPORTANT: Select "Preview" environment ONLY (uncheck Production/Development)
# 4. After adding all variables, redeploy staging branch
# 5. Visit your staging URL to test

# ============================================
# QUICK SETUP CHECKLIST
# ============================================
# [ ] Create Neon database branch named "staging"
# [ ] Create Vercel Blob storage token for staging
# [ ] Create Discord OAuth app for staging
# [ ] Create GitHub OAuth app for staging
# [ ] Generate NEXTAUTH_SECRET (openssl rand -base64 32)
# [ ] Generate API_KEY_ENCRYPTION_SECRET (openssl rand -hex 32)
# [ ] Add all variables to Vercel "Preview" environment
# [ ] Update OAuth redirect URLs to use staging domain
# [ ] Push to staging branch to trigger deployment
# [ ] Test authentication flows on staging site
