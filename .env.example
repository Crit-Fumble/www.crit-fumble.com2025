# ============================================
# Crit-Fumble Website Environment Variables
# ============================================
# Copy this file to .env.local for development

# ============================================
# Core API (Required)
# ============================================
# API URL for the Core API backend
CORE_API_URL="https://core.crit-fumble.com"
# Shared secret for Core API authentication (generate with: openssl rand -hex 32)
CORE_API_SECRET=""

# ============================================
# NextAuth (Required)
# ============================================
# Generate secret with: openssl rand -base64 32
AUTH_SECRET=""

# Application URL (use http://localhost:3000 for dev)
NEXTAUTH_URL="http://localhost:3000"

# ============================================
# Discord OAuth (Required)
# ============================================
# Create app at: https://discord.com/developers/applications
# Add redirect URI: {NEXTAUTH_URL}/api/auth/callback/discord
DISCORD_CLIENT_ID=""
DISCORD_CLIENT_SECRET=""

# Public Discord Client ID (for Discord Activities)
# This should be the same as DISCORD_CLIENT_ID above
# Required for Discord Activity embedded iframe authentication
NEXT_PUBLIC_DISCORD_CLIENT_ID=""

# ============================================
# Discord Activity Setup (Required for Activities)
# ============================================
# To enable Discord Activity OAuth authentication:
#
# 1. Go to: https://discord.com/developers/applications/{DISCORD_CLIENT_ID}
# 2. Navigate to "OAuth2" section
# 3. Add these scopes to your Discord Application:
#    - identify (required: get user ID and username)
#    - guilds.members.read (required: verify guild membership)
#
# 4. Configure the activity URL mapping in Discord:
#    - Activity URL: {NEXTAUTH_URL}/discord-activity
#    - Ensure your app is registered as a Discord Activity
#
# 5. Update next.config.js to allow framing from Discord domains
#    (already configured if using the provided next.config.js)
#
# The Discord Activity will:
# - Authenticate users via Discord OAuth automatically
# - Verify they're in the guild where the activity is running
# - Create/update user records in the Core API
# - Provide session data for the embedded activity

# ============================================
# Permissions (Required)
# ============================================
# Comma-separated Discord user IDs
# Get your Discord ID: User Settings -> Advanced -> Developer Mode, then right-click your name
OWNER_DISCORD_IDS=""
ADMIN_DISCORD_IDS=""

# ============================================
# Early Access Control (Required)
# ============================================
# Comma-separated Discord server (guild) IDs that have early access
# Only admins from these servers can access protected pages
# Get server ID: Server Settings -> Widget -> Server ID, or right-click server name with Developer Mode on
# For staging/preview: Include both prod and test guild IDs so prod admins have staging access
ALLOWED_GUILD_IDS=""

# ============================================
# FumbleBot Integration (Required for bot features)
# ============================================
# Shared secret between website and FumbleBot (generate with: openssl rand -hex 32)
# Used for FumbleBot -> www authentication (when bot creates wiki pages)
BOT_API_SECRET=""

# ============================================
# Optional
# ============================================

# Environment indicator (shows staging banner when set to "staging")
# APP_ENV=""

# Public base URL (defaults to https://www.crit-fumble.com)
# NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# ============================================
# Testing (Development/Preview only)
# ============================================
# Use mock auth adapter (in-memory, no Core API dependency)
# Set to "true" for local development since Core can't be reached directly
USE_MOCK_AUTH="true"

# Secret for test auth endpoint (required for staging tests)
# Generate with: openssl rand -hex 32
# TEST_AUTH_SECRET=""

# Discord IDs for test authentication
# TEST_OWNER_DISCORD_ID=""
# TEST_ADMIN_DISCORD_ID=""
